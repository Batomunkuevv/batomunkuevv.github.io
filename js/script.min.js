/*! For license information please see script.min.js.LICENSE.txt */
(()=>{"use strict";function e(e){e.classList.add("hide"),e.classList.remove("show"),e.classList.remove("fadeIn")}function t(e){e.classList.remove("hide"),e.classList.add("show"),e.classList.add("fadeIn")}function n(e,t=0){let n=e.getAttribute("href").substring(1);const s=t,o=document.getElementById(n).getBoundingClientRect().top-s;window.scrollBy({top:o,behavior:"smooth"})}window.addEventListener("DOMContentLoaded",(()=>{!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const s=document.querySelector(".mainscreen__burger"),o=document.querySelector(".menu__close"),c=document.querySelector(".mainscreen__menu"),r=c.querySelectorAll(".menu__item"),l=document.querySelector(".overlay");function a(){c.classList.remove("mainscreen__menu_active"),e(l),document.body.classList.remove("lock")}s.addEventListener("click",(()=>{c.classList.add("mainscreen__menu_active"),t(l),document.body.classList.add("lock")})),o.addEventListener("click",(()=>{a()})),r.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),a(),n(e.target)}))})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&a()})),document.querySelectorAll(".mainscreen__btn").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),n(e.target)}))}));const d=document.querySelectorAll(".progress-item__procent"),i=document.querySelectorAll(".progress-item__line span");d.forEach(((e,t)=>{i[t].style.cssText=`width: ${e.textContent}`}));const u=document.querySelector(".sidepanel"),m=u.querySelector(".sidepanel__divider");window.addEventListener("scroll",(n=>{document.documentElement.scrollTop>650?(u.style.cssText="color: #000;",m.style.cssText="background: #000",t(f)):(e(f),u.style.cssText="color: #fff;",m.style.cssText="background: #fff")}));const f=document.querySelector(".pageup");f.addEventListener("click",(e=>{e.preventDefault(),n(f,0)}));const y=document.querySelector(".overlay_modal"),_=y.querySelector(".modal__thanks");function v(){e(_),e(y),document.body.classList.remove("lock")}_.querySelector(".modal-thanks__close").addEventListener("click",(()=>{v()})),window.addEventListener("keydown",(e=>{"Escape"===e.code&&v()}));const L=document.querySelector(".form");function g(e){e.classList.add("_error"),e.parentElement.classList.add("_error")}L.addEventListener("submit",(async function(e){e.preventDefault();let n=function(e){let t=0,n=e.querySelectorAll("._req");return n.forEach(((e,s)=>{const o=n[s];!function(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}(o),o.classList.contains("_email")?function(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}(o)&&(g(o),t++):(function(e){return e.value.length<2}(o)||"checkbox"===o.getAttribute("type")&&!1===o.checked||""===o.value)&&(g(o),t++)})),t}(L),s=new FormData(L);if(0===n){L.classList.add("_sending");let e=await fetch("sendmail.php",{method:"POST",body:s});if(e.ok){let n=await e.json();alert(n.message),t(y),t(_),document.body.classList.add("lock"),L.reset(),L.classList.remove("_sending")}else alert("Ошибка"),L.classList.remove("_sending")}else alert("Заполните обязательные поля")}))}))})();