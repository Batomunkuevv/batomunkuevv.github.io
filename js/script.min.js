/*! For license information please see script.min.js.LICENSE.txt */
(()=>{"use strict";function e(e){e.classList.add("hide"),e.classList.remove("show"),e.classList.remove("fadeIn")}function t(e){e.classList.remove("hide"),e.classList.add("show"),e.classList.add("fadeIn")}window.addEventListener("DOMContentLoaded",(()=>{!function(){let e=document.querySelectorAll(".ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}(),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const s=document.querySelector(".mainscreen__burger"),n=document.querySelector(".menu__close"),o=document.querySelector(".mainscreen__menu"),c=o.querySelectorAll(".menu__item"),r=document.querySelector(".overlay");function l(){o.classList.remove("mainscreen__menu_active"),r.classList.add("hide"),r.classList.remove("fadeIn"),document.body.classList.remove("lock")}s.addEventListener("click",(()=>{o.classList.add("mainscreen__menu_active"),r.classList.add("fadeIn"),r.classList.remove("hide"),document.body.classList.add("lock")})),n.addEventListener("click",(()=>{l()})),c.forEach((e=>{e.addEventListener("click",(e=>{l()}))})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&l()}));const d=document.querySelectorAll(".progress-item__procent"),a=document.querySelectorAll(".progress-item__line span");d.forEach(((e,t)=>{a[t].style.cssText=`width: ${e.textContent}`}));const i=document.querySelector(".sidepanel"),u=i.querySelector(".sidepanel__divider");window.addEventListener("scroll",(s=>{document.documentElement.scrollTop>650?(i.style.cssText="color: #000;",u.style.cssText="background: #000",t(m)):(e(m),i.style.cssText="color: #fff;",u.style.cssText="background: #fff")}));const m=document.querySelector(".pageup");m.addEventListener("click",(e=>{e.preventDefault();let t=m.getAttribute("href").substring(1);const s=document.getElementById(t).getBoundingClientRect().top-0;window.scrollBy({top:s,behavior:"smooth"})}));const y=document.querySelector(".overlay_modal"),L=y.querySelector(".modal__thanks");function f(){e(L),e(y),document.body.classList.remove("lock")}L.querySelector(".modal-thanks__close").addEventListener("click",(()=>{f()})),window.addEventListener("keydown",(e=>{"Escape"===e.code&&f()}));const v=document.querySelector(".form");function _(e){e.classList.add("_error"),e.parentElement.classList.add("_error")}v.addEventListener("submit",(async function(e){e.preventDefault();let s=function(e){let t=0,s=e.querySelectorAll("._req");return s.forEach(((e,n)=>{const o=s[n];!function(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}(o),o.classList.contains("_email")?function(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}(o)&&(_(o),t++):(function(e){return e.value.length<2}(o)||"checkbox"===o.getAttribute("type")&&!1===o.checked||""===o.value)&&(_(o),t++)})),t}(v),n=new FormData(v);if(0===s){v.classList.add("_sending");let e=await fetch("sendmail.php",{method:"POST",body:n});if(e.ok){let s=await e.json();alert(s.message),t(y),t(L),document.body.classList.add("lock"),v.reset(),v.classList.remove("_sending")}else alert("Ошибка"),v.classList.remove("_sending")}else alert("Заполните обязательные поля")}))}))})();