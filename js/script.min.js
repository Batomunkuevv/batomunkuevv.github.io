/*! For license information please see script.min.js.LICENSE.txt */
(()=>{"use strict";function e(e){e.classList.add("hide"),e.classList.remove("show")}function t(e){e.classList.remove("hide"),e.classList.add("show")}window.addEventListener("DOMContentLoaded",(()=>{!function(){let e=document.querySelectorAll(".ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}(),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const s=document.querySelector(".mainscreen__burger"),n=document.querySelector(".menu__close"),o=document.querySelector(".mainscreen__menu"),c=document.querySelector(".overlay");function r(){o.classList.remove("mainscreen__menu_active"),c.classList.add("hide"),c.classList.remove("fadeIn"),document.body.classList.remove("lock")}s.addEventListener("click",(()=>{o.classList.add("mainscreen__menu_active"),c.classList.add("fadeIn"),c.classList.remove("hide"),document.body.classList.add("lock")})),n.addEventListener("click",(()=>{r()})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&r()}));const l=document.querySelectorAll(".progress-item__procent"),d=document.querySelectorAll(".progress-item__line span");l.forEach(((e,t)=>{d[t].style.cssText=`width: ${e.textContent}`}));const a=document.querySelector(".sidepanel"),i=a.querySelector(".sidepanel__divider");window.addEventListener("scroll",(e=>{document.documentElement.scrollTop>650?(a.style.cssText="color: #000;",i.style.cssText="background: #000"):(a.style.cssText="color: #fff;",i.style.cssText="background: #fff")}));const u=document.querySelector(".overlay_modal"),m=u.querySelector(".modal__thanks");function y(){e(m),e(u),document.body.classList.remove("lock")}m.querySelector(".modal-thanks__close").addEventListener("click",(()=>{y()})),window.addEventListener("keydown",(e=>{"Escape"===e.code&&y()}));const L=document.querySelector(".form");function f(e){e.classList.add("_error"),e.parentElement.classList.add("_error")}L.addEventListener("submit",(async function(e){e.preventDefault();let s=function(e){let t=0,s=e.querySelectorAll("._req");return s.forEach(((e,n)=>{const o=s[n];!function(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}(o),o.classList.contains("_email")?function(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}(o)&&(f(o),t++):(function(e){return e.value.length<2}(o)||"checkbox"===o.getAttribute("type")&&!1===o.checked||""===o.value)&&(f(o),t++)})),t}(L),n=new FormData(L);if(0===s){L.classList.add("_sending");let e=await fetch("sendmail.php",{method:"POST",body:n});if(e.ok){let s=await e.json();alert(s.message),t(u),t(m),document.body.classList.add("lock"),L.reset(),L.classList.remove("_sending")}else alert("Ошибка"),L.classList.remove("_sending")}else alert("Заполните обязательные поля")}))}))})();